# 占卜功能使用说明

本目录包含了网站占卜功能的相关代码，允许用户进行三种类型的占卜：九宫六壬、六爻起卦和塔罗牌。

## 功能介绍

- `divine_utils.py`: 包含占卜的核心逻辑，提供了三种占卜方法
- `divine_server.py`: 提供HTTP API，让前端JavaScript可以调用Python的占卜功能
- `run_divine_server.py`: 便捷的服务器启动脚本，简化用户启动服务器的步骤

## 使用方法

### 1. 启动Python服务器

要使用真实的占卜功能，需要先启动Python服务器。有两种启动方式：

#### 方式一：使用便捷启动脚本（推荐）

```bash
cd static/python/diviner
./run_divine_server.py
```

这个脚本会自动检查所需文件是否存在，并显示详细的启动信息。

#### 方式二：直接运行服务器文件

```bash
cd static/python/diviner
python3 divine_server.py
```

服务器默认会在端口8000上启动。如果需要使用其他端口，可以通过命令行参数指定：

```bash
python3 divine_server.py 8888  # 使用端口8888
```

### 2. 在网页中使用占卜功能

启动服务器后，打开网站的首页或多页模式页面，就可以看到右下角的占卜小人图标。点击图标会打开占卜窗口，您可以：

- 输入您想要占卜的问题（默认为"今日运势"）
- 选择占卜方式（九宫六壬、六爻起卦或塔罗牌）
- 点击"开始占卜"按钮获取结果

### 3. 配置选项

您可以在 `data/meta.json` 文件中通过 `add_diviner` 字段控制是否显示占卜小人：

```json
"add_diviner": true  // 显示占卜小人
"add_diviner": false // 隐藏占卜小人
```

## 注意事项

- 如果Python服务器未启动或出现错误，系统会自动使用模拟的占卜结果
- 确保您的Python环境中安装了必要的依赖
- 服务器需要保持运行状态才能使用真实的占卜功能
- 本功能仅用于娱乐和参考

## 停止服务器

要停止服务器，只需在运行服务器的终端窗口中按 `Ctrl+C` 即可。